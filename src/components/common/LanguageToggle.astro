---
import { getLangFromUrl, getLocalizedUrl, type SupportedLanguage } from '~/utils/i18n';
const currentLang = getLangFromUrl(Astro.url);
const currentPath = Astro.url.pathname;

// Determine the target language (opposite of current)
const targetLang: SupportedLanguage = currentLang === 'en' ? 'zh' : 'en';
const targetUrl = getLocalizedUrl(currentPath, targetLang);

// Display text for current and target language
const currentDisplay = currentLang === 'en' ? 'EN' : '中文';
const targetDisplay = targetLang === 'en' ? 'EN' : '中文';
---

<a
  href={targetUrl}
  class="text-muted dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center transition-colors"
  aria-label={`Switch to ${targetDisplay}`}
  title={`Switch to ${targetDisplay}`}
>
  <span class="text-sm font-medium">
    {currentDisplay}
  </span>
  <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m0-4l-4-4"></path>
  </svg>
</a> 